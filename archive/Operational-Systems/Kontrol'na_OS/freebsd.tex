\section{Операційна Система - FreeBSD 11.0}

  \subsection{Історія створення}
Історія створення серверної операційної системи FreeBSD бере свій початок ще у Bell Labs з проекту Research Unix (спецверсій UNIX що використоувались на різноманітних дослідницьких компютерах), що також дав початок VAX та іншим UNIX системам 70-80 років. Якщо конкретніше - то FreeBSD базується на оперційні системі розроблені та розповюджувані дослідницькою групою компюторних систем університету Berkeley (CSRG) що була похідною від тогочасних UNIX систем та
мала назву Berkeley Software Distribution або BSD. З точки зору історій BSD це підсімейство Unix що дало початок розробкі не тільки FreeBSD - а і OpenBSD, NetBSD, DragonflyBSD та Darwin (більш відомому наразі як MacOS або OS X ) .

Першим з публічних резізів BSD була Net-1 і оскільки вона була частково базована на коді що був отриманий з AT\&T (і була власністю цієї компанії) для використання Net-1 потрібно було ще отримати ліцензію від правовласників, що спричиняло незручності як легального так і фінансового плану для розвитку університетського проекту BSD. Ще до релізу Net-1 студенти та викладачі почали переробляти ліцензовані AT\&T компоненти (TCP/IP, віртуальну память, файлову систему тощо) і до моменту реліза Net-2 у системному ядрі залишалось 6 файлів базованих повністю на програмному коді з AT\&T. Один з провідних розробників BSD - Кейт Бостікґ запропонував зробити реліз Net-2 без цих шістьох файлів щоб позбутись обмежень ліцензування від AT\&T, Net-2 не була повноцінною операційною системою без них, але вже не потребувала ліцензування від правовласників.

Історія вже саме FreeBSD почанається у 1992 році, коли Вільям та Лін Джоліц написало заміну цим шістьом файлам і невдовзі була представлений першоджерельний код написаний на мові програмування C, що міг бути скомпільований у систему, що могла завантажуватись і працювати на 386 процесорах компанії Intel - вони назвали свій проет 386BSD. Через те що розробка 386BSD не була дуже успішною (подружжя Джоліц були зосереджені і на інших власних проектах) - автори патчів до 386BSD вирішили відгалузитись від основного коду застувавши власний реліз, який би був більш сфокусований на не настільки технічно обізнаних користувачах і міг би запропонувати краще підтримку користувачам.

Компанія видавець Wallnut Creek CDRom - у грудні 1993 року зробила перший реліз FreeBSD. Він відбувся на базі FTP серверів компаній так і на CDROM новому форматі компактних дисків. Компанія займалась в подальшому виданням літератури про ОС, проведенням конференцій тощо і підтримкю FreeBSD на всіх фронтах. Наразі компанія переіменована в iXsystems і є авторами одного з найпопулярніх продуктів базованих на FreeBSD під назвою FreeNAS. Майже одразу після релізу AT\&T подала до суду позов "про порушення авторського права" - відповідачами були NetBSD та FreeBSD, позов був погоджений сторонами конфлікту на невідомих умовах (деталі залишаються невідомими і по сьогодні), але як результат FreeBSD та NetBSD продовжили свій розвиток вже без легальних проблем зі сторони AT\&T.

З 1993 року по 2017 видано 12 версій (11 стабільних і 12та над якою ведеться робота зараз) операційної стистеми FreeBSD, вона зазанала як божевільної популярності, коли у 2005 була дефакто стандарнтною серверною операційною системою для корпоративного серктору, так і "тяжких частів" що ознаменувались витісненням FreeBSD з корпоративного сектору конкуретом - CoreOS. FreeBSD дала дорогу багатьом іншим операційним системам - найпопулярнішими з яких лишаються операційні системи сімейства корпорації Apple (в яку вони потрапили разом з поверненням Стіва Джобса який приніс ОС NextStep як базу для OS X що по суті врятувала Apple у кінці 90тих). FreeBSD наразі позиціонує себе як середовище, не тільки для корпоративних серверів, так і як система для приватного сектору, такою FreeBSD займає частинку ринку для вбудованих систем (як операційна система пристроїв з обмеженою функціональністю).

\subsection{Переваги FreeBSD}
Значними перевагами FreeBSD у порівнянні з іншими UNIX/Linux системами є такі особливості:

\begin{itemize}

    \item Гарна підтримка мережевого обладнання і оптимізація для 100gbps мереж: З оптимізованими драйверами пристроїв  від усіх основним виробників 100gbps мережевого обладнання FreeBSD (починаючи з версії 7.0) отриала загальну отпимізацію мережевого стеку для високонавантажених систем, включаючи автомаштабування сокетних буферів, TCP Segment Offload (TSO), Large Receive Offload (LRO), пряме управління мережеивим стеком  і балансування навантаження при обробці TCP/IP на системах з кількома CPU з підтримкою 100gbps або при одночасному використанні кількох мережевих інтерфейсів. Повна підтримка пристроїв наступних вироників Chelsio, Intel, Myricom и Neterion. За допомогою драйверів від Yandex стала доступна одночасна обробка TCP/IP пакетів.

    \item SMPng: механізм синхронізації в ядрі що забезпечує лінійне маштабування на більш ніж 8 ядрах CPU. В усунені великі блокування (Giant Lock) і поснітю прибрані з рівнів абстракції технологій збереження CAM ( Common Access MEthod Layes) і клієнтів NFS, виконаний перехід на більш диференційовану (fine-grained) винзронізацію у мережеві підсистемі. Оптимізовані планувальники ядра та примітиви синхронізації, опціональний планувальник ULE забезпечує
    привязку процесів до потоків CPU і черги запуска для кожного з CPU для зменшення видатків і відвищення ефективності роботи кеша. Використання бібліотеки libthr що реалізує 1:1 багатопоточність.

    \item SCTP: FreeBSD має увімкнуту по замовчуванню реалізацію нового протоколу передачі з управлінням потоком IETF - Stream Control Transmission Protocol (SCTP), створеної для пітримки VoIP телефонії, телекоммунікацій та інших аплікацій з чіткими вимогами до надійності  і передачею зі знімнною якостюі з такими особливостями як багато-дорожна (multi-path) доставка, відказонадійність (fail-over) і багато поточність (multi-streaming).

    \item Wireless: постійно удосконалюється стек технологій що дозволяють використовувати потужні мережеві (бездротові технологій) від Atheros, і інших виробників бездротового мережевого  таких як Ralink, Intel и ZyDAS. Підримка WPA, WPA2, фонового сканування.

    \item Дозволяє використання Sun ZFS (а також OpenZFS): сучасної файлової системи, що має своїми особливостями просте адміністрування, транзакційну семантику і безперервну ццілістність даних. Від самовідновлення до вбудованої компресії, підтримки raid, знімків системи і управління томами ZFS що дозволяє системним адміністраторам прості інструменти управління надвеликими масивами данних.

    \item Реалізацію для багатьох архітектур серед яких: 386/486/586/686 IA-32, amd64, x86-64, Ultra SPARC, PowerPC, ARM, MIPS

    \item Обєднаний кеш віртуальної памяті і буферів файлових систем оптимізує розподілення памяті та дискового кешу. що використовується программами, в результаті чого програми отримують високоефективний доступ до файлової системи динамічно, без налаштувань розмінів кешу системним адмінастратором.

    \item Модулі сумістності, що дозволяють программам скомпільованим під інші операційні системи такі як (Linux, SCO UNIX, System V) виконуватись в середовищі FreeBSD.

    \item Підтримка IP Security (IPsec) та IPv6

    \item Пріорітетність задач - що дозволяє високо приорітетним задача витісняти низько приорітетні з ланцюжка виконання в ядрі. Сюди можна включати висоефективну багатопоточний мережевий стек та багатопоточну віртуальну память.

    \item DTrace для налагодженя та відладки ядра "вживу".

    \item Віртуалізація мережі. Контенейр ("vimage") було імплементовано на рівні ядра що дозволило йому (ядру FreeBSD) справлятись з багатьма незалежними інстансами мережевого стану, що в свою чергу дозволило створюбвати доволі складні віртуальні мережеві топології напрякладі подібних що cтворюються пакетом віртуалізації Docker/Moby. Окрім того можливе використання Docker напряму (експерементальна підтримка).

    \item Коллекція портів - вже скомпільованого програмного забезпечення що може бути запущене на FreeBSD.

    \item Jails - легковісна альтернатива віртуалізації що дозволяє обмежити процес до простору імен для яких дозволено лише файловий/мережевий доступ. Jails довзоляє сворювати іерархію навіть внутрі самого себе (що в свою чаргу дохзволяє обмежувати вже обмежені процеси).

    \item Брендмауер встановлений по замовчуванню.

\end{itemsize}

\subsection{Ядро системи}
Переваги FreeBSD не обмежуються цим списком, систему можна конфігурувати на власний розсуд/потреба/можливості. Це можна зробити з допомогою налаштування ядра системи, що зазвичає є першим кроком у конфігурації freebsd системи взагалі. Ядро, або kernel, системи FreeBSD можна налаштовувати динамічно або вживу. За необхідністю можна змінювати більшість аспектів швидкодії системи, слід зауважити що певні елементи ядра не можуть бути змінені безпосередньо під час роботи системи, або змінені взагалі.

Рекомендується збирати власне ядро для викорастання на перних конфігураціях, для цього варто лише переіменовувати директорію "kernel" з ядром що знаходиться у директорій /boot/, доречі всі інші директорій поза директорії з ядром називають userland. Але повернемось до ядра, точніше на самий початок що воно таке і навіщо воно пострібно в FreeBSD (і інших операційних системах).

Так ось ядро по суті є інтерфейсом між апаратною і програмною частиною. Ядро краще знає як і куди записувати данні, як працювати в мережі, як перетворюбвати сукупність бітів у tiff файлі і яким чином посилати ці данні на друк чи на вивід на екран. Коли программа дає запит на виділення їй ресурсів дял обчислень саме ядро обслуговує цей запит та виділяє ресурси що були запрошені.

\subsection{Кастомізація ядра}
 В спрощеному вигляді ядро це программи та файли конфігурацій що як вже було сказано знаходяться в директорії \texttt{/boot/kernel}, інтерфейсом що використовувати з командної стрічки для перегляду або зміни
опцій є команда \texttt{sysctl}. Загалом ядро системи містить наступні розділи

\begin{center}
  \begin{tabular}{ l | l  }
    \textbf{Sysctl} & \textbf{Призначення} \\ \hline
    kern & Основні функції ядра  \\ \hline
    vm & Підсистема віртуальної памяті  \\ \hline
    vfs & Файлові системи \\ \hline
    net & Мережеві функції  \\ \hline
    debug & Інформація відладки  \\ \hline
    hw & Апарація щодо апаратної частини  \\ \hline
    user & Інформація щодо простору user   \\ \hline
    p1003\_1b & Параметр керуючі характеристиками POSIXa  \\ \hline
    compat & Сумістність ядра з програмним забепеченням інших операційний систем  \\ \hline
    security & Параметры обеспечения безопасности \\ \hline
    dev & Інфомрація щодо драйверів пристроїв \\
  \end{tabular}
\end{center}

Отримати розгорнуту довідку щодо кожного з розділі можна набравши команду \texttt{sysctl} з ключем відповідного розділу, наприклад \texttt{sysctl hw} (видасть інфомарцію про апаратне забезпечення
на сервері).

\begin{lstlisting}
    hw.ncpu: 24
    hw.byteorder: 1234
    hw.memsize: 103079215104
    hw.activecpu: 24
    hw.targettype:
    hw.physicalcpu: 12
    hw.physicalcpu_max: 12
\end{lstlisting}

\texttt{sysctl} довзоляє не тільки виводити але і змінювати певні системні параметри ядра за допомогою оператора еквівалентності (=) наприклад:

\begin{lstlisting}
> sysctl net.inet.ip.ttl=128
net.inet.ip.ttl: 64  > 128
\end{lstlisting}

Можливо також отримувати довідку щодо того чи іншого значення (якщо така опція доступна для того чи іншого налаштування) за допомогою ключа "-d". Значення (реальне значення чи опис) багатьох опцій ядра можна знайти лише в перешоджерельному коді (за умови якщо воно там є) тому запит на опис не завжди спрацьовує. Опцій ядра також можна задавачи через конфігураційний файл ядра (kernel) що має свій власний формат. З вишенаписаного можна здогадатись що ядро FreeBSD є монолітним з динамічно-завантажуваними модулями які користувач може налаштувати "під себе".


\subsection{Користувацький ринок та графічні оболонки}
Окрім сектора серверів, FreeBSD також позиціонує себе як система для настільних компютерів та ноутбуків, тобто для користувацького сектору. Якщо на серверах викоритовують одну з оболонок (будьто \texttt{csh} або \texttt{tsch}) то більшості користувачів потібна графічна система, роль якої у FreeBSD можутуь відігравати кілька різних оболочок що підтримуються різними командами (наприклад команда \texttt{GNOME} підтримує крім своєї оболонки щей \texttt{mate} та \texttt{Cinnamone}). Наразі доступні xfce, gnome, kde plasma, mate, cinamone, i3 та інші.

\subsection{Ринок вбудованих систем}
Окрім серверного та користувацького сектору, FreeBSD можливо використовувати на вбудованих системах (напирклад на роутерах або міні компюторах). Можна навіть стверджувати що у проекту FreeBSD завдяки цьому сектору відбувається другий подих, оскільки неймовірно популярності набуває таке якище як IoT або Internet of Things, де надійні і відмовостійкі системи потрібн як ніколи. FreeBSD пропонує вже прекомпільовані образи системи що їх можна скачати з домашньої сторінки FreeBSD скачати вже готовими для наступних плат розробки: Raspberry PI, Banana, Eagle, CUBIE та ін.

\subsection{Версія 11}
Версія 11 Операційної системи FreeBSD вийшла у жовтні 2016 року і несло в собі численні зміни в порівнянно з попередньою версією. Зміни в основному стосувались виплавлень в ядрі, додачею нових модулей ядра що забезпечували роботу нових пристроїв, виправленням коду для покарщеної компіляції за стандартом C++11 (стандарт 2011 року), оновлення чиленниз бібліотек. оновленням ряду функціональностей программи \texttt{bsdinstall}, покращеною підтримкою віртуалізації і покращенням роботи на архітектурі arm (в основному iot пристрої).

\subsection{Висновки}
FreeBSD хоч і не займає наразі лідуючі позиції на корпоративному ринку серверних OS, але списувати з рахунків таку систему вкрай ще рано і розробка триває безперестанно.


\begin{left}\normalsize{\cyr{\textbf{Використані джерела}}}\end{left}
\begin{enumerate}
  \item Darwin/Mac OS X: The Fifth BSD \\ https://networking.ringofsaturn.com/Unix/bsd.php
  \item Features of FreeBSD \\ https://www.freebsd.org/features.html
  \item FreeBSD's SMPng \\ http://www.onlamp.com/pub/a/bsd/2005/01/20/smpng.html
  \item Доступный UNIX: Linux, FreeBSD, DragonFlyBSD, NetBSD, OpenBSD \\
  https://books.google.com.ua/books?id=JjOApZ2m0JUC
  \item Лукас М. FreeBSD. Подробное руководство \\
  https://www.michaelwlucas.com/os/af2e
  \item Download FreeBSD \\ https://www.freebsd.org/where.html
  \item The Top 10 Things to Know About the Internet of Things (IoT) as a PCB Designer \\ https://www.autodesk.com/products/eagle/blog/top-10-things-about-iot-pcb-designer/
  \item FreeBSD 11.0-RELEASE Release Notes \\ https://www.freebsd.org/releases/11.0R/relnotes.html
  \item Мифы о FreeBSD \\ https://habrahabr.ru/company/ua-hosting/blog/306804/
  \item Сервер на стероидах: FreeBSD, nginx, MySQL, PostgreSQL, PHP и многое другое \\ https://habrahabr.ru/post/70167/
\end{enumerate}
